{% extends "base.html" %}
{% load custom_filters %}
{% block body %}
<!-- í´ëŸ¬ìŠ¤í„° í‚¤ì›Œë“œ í˜ì´ì§€ -->
<section class="mb-10 grid grid-cols-2 items-center mt-10">
  <h1 class="col-span-1 text-4xl mb-4 font-bold">#{{ cluster_number }}</h1>

  <div class="flex flex-wrap justify-end gap-2 mb-6">
    {% for keyword in keywords %}
      <span class="inline-block bg-gray-100 text-gray-600 rounded-full px-3 py-1 text-lg font-semibold cursor-default">
        #{{ keyword }}
      </span>
    {% endfor %}
  </div>
  <div>
    <p class="text-gray-600 mb-6">ğŸš©â€‹{{ cluster_bill_count }}ê°œì˜ ì˜ì•ˆì´ ìˆìŠµë‹ˆë‹¤!</p>
  </div>
    <div class="flex flex-wrap justify-end">
      <a href="/cardnews/" class="mt-8 inline-block text-gray-600 text-lg">
        ğŸ”ë‹¤ë¥¸ ì£¼ì œ ë‘˜ëŸ¬ë³´ê¸°
      </a>
    </div>
</section>
    
<!-- ì¹´ë“œ ë‰´ìŠ¤ -->
<div class="swiper mySwiper pb-20 relative">
  <div class="swiper-wrapper">
    {% for bill in cluster_bills %}
      <div class="swiper-slide flex justify-center">
        <a href="{% url 'history:bill_detail' bill.pk %}" 
           class="block w-[600px] rounded-lg shadow-md hover:shadow-xl border border-gray-200 hover:border-cyan-400 transition duration-300 p-4">
          
           <!-- ìƒë‹¨: ë¼ë²¨ë³„ ë°°ê²½ìƒ‰ ë‹¤ë¥´ê²Œ -->
          <div class="relative h-[280px] overflow-hidden flex items-center justify-center" style="background-color: {{ label_color_map|dict_get:bill.label|default:'#67e8f9' }};">
            <p class="card-news text-white text-2xl font-bold leading-relaxed whitespace-pre-line z-10 relative" style="font-size: clamp(1.7rem, 3.0vw, 1.9rem);">
              {{ bill.card_news_content }}
            </p>
            <!-- ë°˜íˆ¬ëª… ì˜¤ë²„ë ˆì´ë¡œ í…ìŠ¤íŠ¸ ê°€ë…ì„± ë†’ì´ê¸° (ì˜µì…˜) -->
            <!-- <div class="absolute inset-0 bg-gradient-to-t from-white/80 via-transparent to-transparent pointer-events-none rounded-t-3xl"></div> -->
          </div>

          <!-- í•˜ë‹¨: íƒ€ì´í‹€ ì˜ì—­ -->
          <div class="rounded-b-2xl mt-2 border-t border-gray-200 flex items-center justify-center">
            <div class="rounded-b-2xl mt-1 border-gray-200 flex flex-col">
              <h3 class="text-gray-800 font-semibold text-base text-center truncate">
                {{ bill.title }}
              </h3>
              <div class="flex space-x-4 mt-1 mb-1">
                <p class="text-gray-500 font-medium text-sm">ğŸ’¬â€‹ì˜ì•ˆë²ˆí˜¸ - {{ bill.bill_number }}</p>
                <p class="text-gray-500 font-medium text-sm">ğŸ“…í‘œê²°ë‚ ì§œ - {{ bill.latest_vote_date|default:"-"|date:"Y-m-d" }}</p>
              </div>
            </div>
          </div>
        </a>
      </div>
      {% endfor %}
    </div>

    <!-- í™”ì‚´í‘œ ì•„ì´ì½˜ì´ ë“¤ì–´ê°„ ìŠ¤íƒ€ì¼ -->
    <div class="swiper-button-prev w-10 h-10 flex items-center justify-center rounded-full bg-white/80 shadow-md text-cyan-600 hover:bg-white hover:text-cyan-800 transition duration-200 z-10">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
      </svg>
    </div>

    <div class="swiper-button-next w-10 h-10 flex items-center justify-center rounded-full bg-white/80 shadow-md text-cyan-600 hover:bg-white hover:text-cyan-800 transition duration-200 z-10">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
      </svg>
    </div>
    <!-- <div class="swiper-button-next text-cyan-600"></div>
    <div class="swiper-button-prev text-cyan-600"></div> -->
    <div class="swiper-pagination mt-16"></div>
</div>


<style>
  .swiper-button-prev, .swiper-button-next {
  width: 40px; height: 40px;
  background: rgba(255 255 255 / 0.8);
  border-radius: 50%;
  box-shadow: 0 2px 8px rgb(0 0 0 / 0.1);
  display: flex;
  justify-content: center;
  align-items: center;
  color: #06b6d4; /* cyan-600 */
  cursor: pointer;
  transition: background-color 0.2s ease, color 0.2s ease;
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  z-index: 20;
}

.swiper-button-prev:hover, .swiper-button-next:hover {
  background: #ffffff;
  color: #0e7490; /* cyan-800 */
}

.swiper-button-prev {
  left: 10px;
  top: 50%;
  transform: translateY(-50%);
}

.swiper-button-next {
  right: 10px;
  top: 50%;
  transform: translateY(-50%);
}

.swiper-button-prev::after,
.swiper-button-next::after {
  content: none !important;
  background-image: none !important;
}

.swiper-button-prev svg,
.swiper-button-next svg {
  width: 20px;
  height: 20px;
  stroke-width: 2.5;
}
</style>
{% endblock %}


{% block script %}
<script>

// ìŠ¬ë¼ì´ë“œ ì¹´ë“œ----
  const swiper = new Swiper('.mySwiper', {
    // direction: 'vertical',
    slidesPerView: 2,  // í•œ ë²ˆì— ë³´ì—¬ì¤„ ìŠ¬ë¼ì´ë“œ ìˆ˜
    grid: {
      rows: 2,
      fill: 'row',
    },
    spaceBetween: 20,   // ìŠ¬ë¼ì´ë“œ ì‚¬ì´ ê°„ê²©(px)
    // loop: true,         // ë¬´í•œë£¨í”„
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
    pagination: {
      el: '.swiper-pagination',
      clickable: true,
    },
    breakpoints: {
      0: {               slidesPerView: 1, grid: { rows: 1 } },   // ì‘ì€ í™”ë©´ 1ì—´ 1í–‰
    768: {             slidesPerView: 1, grid: { rows: 1 } },   // íƒœë¸”ë¦¿ë„ 1ì—´ 1í–‰ ìœ ì§€
    1024: {            slidesPerView: 2, grid: { rows: 2 } },   // ë°ìŠ¤í¬íƒ‘ 2ì—´ 2í–‰
  },
  });


</script>

{% endblock %}