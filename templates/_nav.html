{% load static %}

<!-- navbar -->
<div class="min-h-full">
  <nav class="bg-transparent" style="position: relative; z-index: 10;">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="flex h-16 items-center justify-center">
        <!-- 메뉴 전체 -->
        <div class="flex items-center space-x-10">

          <!-- 메뉴 항목 -->
          <div>
            <div class="flex items-center space-x-4">
              <!-- Home -->
              <a href="{% url 'home' %}" class="rounded-md px-3 py-2 text-sm font-medium text-gray-500 hover:text-cyan-400">Home</a>
              <!-- Dashboard -->
              <a href="{% url 'dashboard:dashboard' 22 %}" class="rounded-md px-3 py-2 text-sm font-medium {% if '/dashboard/' in request.path %}text-cyan-400{% else %}text-gray-500 hover:text-cyan-400{% endif %}">Dashboard</a>
              
              <!-- Card News -->
              <a href="/cardnews/" class="rounded-md px-3 py-2 text-sm font-medium {% if request.path == '/cardnews/' %}text-cyan-400{% else %}text-gray-500 hover:text-cyan-400{% endif %}">Card News</a>
              <!-- History -->
              <a href="/history/" class="rounded-md px-3 py-2 text-sm font-medium {% if request.path == '/history/' %}text-cyan-400{% else %}text-gray-500 hover:text-cyan-400{% endif %}">History</a>
              <!-- TreeMap -->
              <a href="{% url 'treemap' %}" class="rounded-md px-3 py-2 text-sm font-medium {% if request.path == '/treemap/' %}text-cyan-400{% else %}text-gray-500 hover:text-cyan-400{% endif %}">Treemap</a>

              <!-- My Page Dropdown (클릭형) -->
              <div class="relative">
                <button id="dropdownToggle" class="rounded-md px-3 py-2 text-sm font-medium text-gray-500 hover:text-cyan-400 focus:outline-none">
                  My Page
                </button>
                <!-- Dropdown Menu -->
                <div id="dropdownMenu"
                    class="absolute left-1/2 transform -translate-x-1/2 mt-2 bg-white border border-gray-200 rounded shadow-md z-50 hidden w-max text-left">
                  {% if user.is_authenticated %}
                    <a href="{% url 'accounts:my_page' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">관심 법안</a>
                    <a href="{% url 'accounts:logout' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">로그아웃</a>
                  {% else %}
                    <a href="{% url 'accounts:login' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">로그인</a>
                    <a href="{% url 'accounts:signup' %}" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">회원가입</a>
                  {% endif %}
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>
</div>


<!-- tabs style/script -->
<style>
  .tab {
    @apply py-2 px-4 text-gray-600 hover:text-black font-medium transition-colors duration-200 border-b-2 border-transparent;
  }
  .active-tab {
    @apply text-black border-black;
  }
</style>

<script>
  const tabs = document.querySelectorAll(".tab");
  const content = document.getElementById("tab-content");

  const contents = {
    "홈": "홈 페이지 내용입니다.",
    "서비스": "우리가 제공하는 서비스입니다.",
    "포트폴리오": "작업 포트폴리오를 확인해보세요.",
    "연락처": "문의는 여기를 통해 주세요.",
  };

  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      tabs.forEach(t => t.classList.remove("active-tab"));
      tab.classList.add("active-tab");
      content.textContent = contents[tab.textContent.trim()];
    });
  });

  // my_page 드롭박스
    document.addEventListener("DOMContentLoaded", function () {
    const toggle = document.getElementById("dropdownToggle");
    const menu = document.getElementById("dropdownMenu");

    toggle.addEventListener("click", function (e) {
      e.stopPropagation(); // 다른 클릭 이벤트 막기
      menu.classList.toggle("hidden");
    });

    // 바깥 클릭하면 드롭다운 닫힘
    document.addEventListener("click", function (e) {
      if (!menu.contains(e.target) && !toggle.contains(e.target)) {
        menu.classList.add("hidden");
      }
    });
  });
</script>